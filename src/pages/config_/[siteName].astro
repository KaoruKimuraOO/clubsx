---
import Layout from '@layouts/Landing.astro'
import { Debug } from 'astro/components'

import { config as _config } from '@fixtures/config'
import { decode } from '@devprotocol/clubs-core'

const { siteName } = Astro.params

const config = await _config(siteName)
const decodedConfig = decode(config)
---

<Layout>
  <Debug {{config, decodedConfig}} />
  <input type="hidden" id="encodedConfig" value={config} />
</Layout>

<script>
  import { decode } from '@devprotocol/clubs-core'

  const config = (document.getElementById('encodedConfig') as HTMLInputElement)
    .value
  const decodedConfig = decode(config)

  console.log({ decodedConfig })
</script>
