---
import AdminMembershipsForm from '@components/AdminMembershipsForm/AdminMembershipsForm.svelte'
import { config as _config } from '@fixtures/config'
import { adminFactory } from '@devprotocol/clubs-core'
import admin from '@plugins/admin'
import SetupLayout from '@layouts/Setup.astro'
import image from '../../../../assets/preview-overview-chart.png'

const { site } = Astro.params

const { getStaticPaths, getCurrentConfig } = adminFactory({
  config: async () => await _config(site),
  plugins: {
    admin,
  },
})

const config = await getCurrentConfig()
const path = (await getStaticPaths()).find(({ props }) => props.clubs)

if (!path) {
  throw new Error('Path undefined: ', path)
}
---

<SetupLayout {config} {...path.props} setupStep="PREVIEW">
  <h2 class="mb-16 font-title text-2xl font-bold">Preview</h2>
  <iframe
    width="200%"
    height="1600"
    style="transform: scale(0.5); transform-origin: 0 0"
    src={`https://clubs.place/sites_/${site}`}
    class="mb-16 rounded-[32px]"
  >
  </iframe>
  <div
    class="mb-16 mt-[-800px] w-full rounded bg-[#040B10] py-4 px-8 text-center"
  >
    <a
      class="text-lg font-bold"
      href={`https://clubs.place/sites_/${site}`}
      target="_blank"
    >
      Open external
    </a>
  </div>
  <div
    class="relative mb-16 w-full rounded-[32px] bg-[#5B8BF5] pt-8 pl-0 pr-0 pb-0"
  >
    <div class="font-Syne mt-16 text-center text-4xl font-bold">
      Almost there!
    </div>
    <div class="font-DMSans mt-8 text-center text-base font-normal">Next?</div>
    <div class="font-Syne mb-16 text-center text-2xl font-bold">
      Publish your club to unlock more features
    </div>
    <div
      class="relative bottom-0 left-[20%] h-[80%] w-[80%] rounded-t-[32px] rounded-l-[32px]"
    >
      <img
        class="object-cover object-center"
        src={image}
        alt="Post sales chart"
      />
    </div>
  </div>
</SetupLayout>
