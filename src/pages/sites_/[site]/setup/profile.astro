---
import ProfileSetupForm from '@components/ProfileSetupForm/ProfileSetupForm.svelte'
import { config as _config } from '@fixtures/config'
import { adminFactory } from '@devprotocol/clubs-core'
import membership from '@plugins/membership'
import SetupLayout from '@layouts/Setup.astro'

const { site } = Astro.params

const { getCurrentConfig } = adminFactory({
  config: async () => await _config(site),
  plugins: {
    membership,
  },
})

const config = await getCurrentConfig()
---

<SetupLayout {config} setupStep="PROFILE">
  <ProfileSetupForm client:only="svelte" config={config} />
</SetupLayout>
